<!-- 0675dae3-232c-4c54-962b-4dfb68e00ef6 9035b435-2a87-47b2-bac9-e7661f078f64 -->
# Enhanced Tesla News Analysis Workflow

## Overview

Extend the existing framework to retrieve news from Reuters and Teslarati, classify articles into a 7-category taxonomy, score sentiment and market impact using LLM, and generate professional email reports for investors.

## Implementation Steps

### 1. News Retrieval Module

Create dedicated adapters for Reuters and Teslarati that:

- Use Browser-Use to navigate search pages with Tesla keywords
- Extract article metadata (title, date, summary, URL)
- Apply 30-day time window filter
- Deduplicate by title+date hash
- Store in `raw_news.json` format
- Update `app/adapters/news_sources.py` with source-specific scraping logic

### 2. Classification System

Build taxonomy-based classifier:

- Define 7-category taxonomy in `app/domain/taxonomy.py` (Financial, Product, Strategic, Management, Policy, Market, Macro)
- Create keyword mapping table for rule-based classification
- Implement LLM fallback classifier using structured output
- Add confidence scoring (0-1)
- Store classification results with original articles
- Update `SentimentAnalysisRecord` schema to include `category` and `classification_confidence` fields

### 3. Enhanced Sentiment & Impact Scoring

Upgrade scoring service:

- Add impact dimension (1-5 scale) alongside sentiment (-1 to +1)
- Create structured LLM prompt with category-aware scoring
- Implement batch scoring for efficiency
- Calculate aggregate metrics (avg sentiment, avg impact, TSI composite)
- Update `app/services/scorer.py` with `LLMImpactScorer` class
- Add `impact` and `impact_rationale` fields to schema

### 4. Email Report Generator

Create report generation service:

- Build Jinja2 templates for professional email format
- Generate top-5 headlines table sorted by impact
- Synthesize analysis section using LLM summarization
- Calculate TSI (Tesla Sentiment Index) = avg_sentiment Ã— avg_impact
- Format as HTML email with inline CSS
- Add CLI command: `python -m app.cli.generate_report --period weekly`
- Store reports in `reports/` directory

### 5. Integration & Testing

- Wire new modules into existing pipeline
- Add unit tests for classification accuracy
- Create integration test with sample Reuters/Teslarati data
- Update documentation with new workflow
- Add evaluation metrics tracking

## Key Files to Modify

- `app/adapters/news_sources.py` (new)
- `app/domain/taxonomy.py` (new)
- `app/domain/schemas.py` (add category, impact fields)
- `app/services/classifier.py` (new)
- `app/services/scorer.py` (enhance with impact)
- `app/services/report_generator.py` (new)
- `app/cli/generate_report.py` (new)
- `migrations/002_add_classification_fields.sql` (new)

### To-dos

- [ ] Create Reuters and Teslarati adapters with Browser-Use scraping, deduplication, and JSON output
- [ ] Define 7-category taxonomy, keyword mapping, and LLM fallback classifier with confidence scoring
- [ ] Enhance scorer with impact dimension (1-5), category-aware prompts, and TSI calculation
- [ ] Build email report generator with Jinja2 templates, top-5 table, LLM analysis synthesis, and CLI command
- [ ] Wire modules into pipeline, add classification/scoring tests, update docs with new workflow